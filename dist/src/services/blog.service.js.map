{"version":3,"sources":["../../../src/services/blog.service.ts"],"sourcesContent":["import { PrismaClient, Blog } from '@prisma/client';\nimport { Service } from 'typedi';\nimport { HttpException } from '@exceptions/HttpException';\nimport { CreateBlogDto } from '@/dtos/blogs.dto';\n\n@Service()\nexport class BlogService {\n  private readonly prisma = new PrismaClient();\n\n  public async getAllBlogs({ page, limit }: { page: number; limit: number }): Promise<{ blogs: Blog[]; total: number }> {\n    const [blogs, total] = await Promise.all([\n      this.prisma.blog.findMany({\n        skip: (page - 1) * limit,\n        take: limit,\n      }),\n      this.prisma.blog.count(),\n    ]);\n\n    return { blogs, total };\n  }\n\n  public async getBlogById(id: string): Promise<Blog> {\n    const blog = await this.prisma.blog.findUnique({\n      where: { id },\n    });\n\n    if (!blog) throw new HttpException(404, `Blog with ID ${id} not found`);\n\n    return blog;\n  }\n  public async createBlog(blogData: CreateBlogDto): Promise<Blog> {\n    return this.prisma.blog.create({ data: blogData });\n  }\n}\n"],"names":["BlogService","getAllBlogs","page","limit","blogs","total","Promise","all","prisma","blog","findMany","skip","take","count","getBlogById","id","findUnique","where","HttpException","createBlog","blogData","create","data","PrismaClient"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANsB;wBACX;+BACM;;;;;;;;;;;;;;;;;;;;AAIvB,IAAA,AAAMA,cAAN,MAAMA;IAGX,MAAaC,YAAY,EAAEC,IAAI,EAAEC,KAAK,EAAmC,EAA6C;QACpH,MAAM,CAACC,OAAOC,MAAM,GAAG,MAAMC,QAAQC,GAAG,CAAC;YACvC,IAAI,CAACC,MAAM,CAACC,IAAI,CAACC,QAAQ,CAAC;gBACxBC,MAAM,AAACT,CAAAA,OAAO,CAAA,IAAKC;gBACnBS,MAAMT;YACR;YACA,IAAI,CAACK,MAAM,CAACC,IAAI,CAACI,KAAK;SACvB;QAED,OAAO;YAAET;YAAOC;QAAM;IACxB;IAEA,MAAaS,YAAYC,EAAU,EAAiB;QAClD,MAAMN,OAAO,MAAM,IAAI,CAACD,MAAM,CAACC,IAAI,CAACO,UAAU,CAAC;YAC7CC,OAAO;gBAAEF;YAAG;QACd;QAEA,IAAI,CAACN,MAAM,MAAM,IAAIS,4BAAa,CAAC,KAAK,CAAC,aAAa,EAAEH,GAAG,UAAU,CAAC;QAEtE,OAAON;IACT;IACA,MAAaU,WAAWC,QAAuB,EAAiB;QAC9D,OAAO,IAAI,CAACZ,MAAM,CAACC,IAAI,CAACY,MAAM,CAAC;YAAEC,MAAMF;QAAS;IAClD;;QAzBA,uBAAiBZ,UAAS,IAAIe,oBAAY;;AA0B5C"}